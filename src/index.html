<html>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://openradio.tunehog.com/apps/openradio.js"></script>
<script>

/** This function is called from the native side when the user adds an influence track to the
 * current radio station.
 *  @state: current state of the sensors and queue size
 *  @track: simplified version of the track that the user has selected
 */
function OpenRadio_AddTrackInfluence(state, track) {
}

/** This function is called from the native side when the user scores the current track. 
 *  @payload: contains the simplified version of the track. {score:number, track:simplifiedTrack}
 */
function OpenRadio_UserDidScoreTrack(payload) {
}

/** This function is called from the native side when the user plays a track. 
 *  @track: contains the simplified version of the track
 */
function OpenRadio_UserDidPlayTrack(track) {
}

/** This function is called from the native side when the current playing track has fininished buffering.
 *  @state: contains the queue size and the sensor and camera current state
 */
function OpenRadio_GetNextTracks(state) {
    if (state.queueSize>4) { trace("too many in the queue"); return; }
    
    $("#main").html(JSON.stringify(state));
    
    MusicCatalog_FindTracks(2, [ { "term": { "analysis.music_styles.top_0": "house" } } ],
            function(err,tracks) {
        if(!err) OpenRadio_EnqueueTracks(tracks, false);
    });
}

</script>
<body>
<h1>Status:<div id="status"></div> </h1>
<h1><div id="main">Ivan electronica...</div> </h1>
</body>
</html>

